<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content_Type" content="text/html; charset=UTF-8"><meta http-equiv="Cache-Control" content="max-age=7200"><meta http-equiv="Content-Encoding" content="gzip"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="CG函数标准库" /><meta name="author" content="阿锋" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="数学函数（Mathematical Functions）" /><meta property="og:description" content="数学函数（Mathematical Functions）" /><link rel="canonical" href="https://www.damonc.com/posts/CG-function-library/" /><meta property="og:url" content="https://www.damonc.com/posts/CG-function-library/" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2017-10-03T20:17:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="CG函数标准库" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@阿锋" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"阿锋","url":"https://github.com/damonc-top/"},"dateModified":"2017-10-03T20:17:00+08:00","datePublished":"2017-10-03T20:17:00+08:00","description":"数学函数（Mathematical Functions）","headline":"CG函数标准库","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.damonc.com/posts/CG-function-library/"},"url":"https://www.damonc.com/posts/CG-function-library/"}</script><title> CG函数标准库 -</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><link rel="mask-icon" href="/assets/img/favicons/safari-pinned-tab.svg" color="#5bbad5"><meta name="apple-mobile-web-app-title" content="afeng`s blog"><meta name="application-name" content="Afeng Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://raw.githubusercontent.com/damonc-top2/fileStorage/main/commons/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/"> </a></div><div class="site-subtitle"><p>思绪来去无影踪</p><p>偶尔会在这里停留</p></div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/damonc-top " aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['damonc','126.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>CG函数标准库</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>CG函数标准库</h1><div class="post-meta text-muted"><div class="d-flex"><div> <span> 作者 <em> <a href="https://github.com/damonc-top/">阿锋</a> </em> </span> <span> 发表于 <em class="timeago" data-ts="1507033020" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2017-10-03 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2524 字"> <em>14 分钟</em>阅读</span> <span> <font size="0.5px" color="#dd0000">音乐会被广告插件拦截</font> </span></div></div></div><div class="post-content"><h2 id="数学函数mathematical-functions"><span class="mr-2">数学函数（Mathematical Functions）</span><a href="#数学函数mathematical-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>下表中列举了 Cg 标准函数库中所有的数学函数， 这些数学函数用于执行数 学上常用计算，包括：三角函数、幂函数、园函数、向量和矩阵的操作函数。这 些函数都被重载，以支持标量数据和不同长度的向量作为输入参数。</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">函数<th style="text-align: left">功能<tbody><tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">abs(x)</code><td style="text-align: left">返回输入参数的绝对值<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">all(x)</code><td style="text-align: left">如果输入参数均不为 0，则返回 ture；否则返回 flase。 &amp;&amp;运算<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">any(x)</code><td style="text-align: left">输入参数只要有其中一个不为 0，则返回true。<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">clamp(x,a,b)</code><td style="text-align: left">如果 x 值小于 a，则返回 a；如果 x 值大于 b，返回 b；否则返回 x<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">degrees(x)</code><td style="text-align: left">输入参数为弧度值(radians)， 函数将其转换为角度值(degrees)<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">determinant(m)</code><td style="text-align: left">计算矩阵的行列式因子<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">cross(A,B)</code><td style="text-align: left">返回两个三元向量的叉积(cross product)。注意，输入参数必须是<br />三元向量！<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">dot(A,B)</code><td style="text-align: left">返回 A 和 B 的点积(dot product)。参数 A 和 B可以是标量，也可以<br />是向量（输入参数方面，点积和叉积函数有很大不同）<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">exp(x)</code><td style="text-align: left">计算 ex 的值， e= 2.71828182845904523536<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">exp2(x)</code><td style="text-align: left">计算 2x 的值<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">floor(x)</code><td style="text-align: left">向下取整。例如 floor(float(1.3))返回的值为 1.0；但是<br />floor(float(-1.3))返回的值为-2.0。该函数与 ceil(x)函数相对应<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">ceil(x)</code><td style="text-align: left">对输入参数向上取整。 例如：ceil(float(1.3)) ，返回值为2.0<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">fmod(x,y)</code><td style="text-align: left">返回 x/y 的余数。如果 y 为 0， 结果不可预料<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">frac(x)</code><td style="text-align: left">返回标量或每个向量分量的小数部分<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">frexp(x, out exp)</code><td style="text-align: left">将浮点数 x 分解为尾数和指数，即x = m* 2^exp， 返回 m， 并将<br />指数存入exp 中；如果 x 为 0，则尾数和指数都返回 0<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">isfinite(x)</code><td style="text-align: left">判断标量或者向量中的每个数据是否是有限数，如果是返回true；<br />否则返回 false;无限的或者非数据(not-a-number NaN)<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">isinf(x)</code><td style="text-align: left">判断标量或者向量中的每个数据是否是无限，如果是返回 true；<br />否则返回 false<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">isnan(x)</code><td style="text-align: left">判断标量或者向量中的每个数据是否是非数据(not-a-number<br /> NaN)，如果是返回 true；否则返回 false<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">ldexp(x, n)</code><td style="text-align: left">计算$x*2n$的值<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">lerp(a, b, f)</code><td style="text-align: left">计算$ a+(b-a)<em>f $ 或者$ (1-f)</em>a+f*b $ 的值。即在下限 a 和上限 b 之间进<br />行插值， f 表示权值。注意，如果 a 和 b 是向量，则权值f必须是<br />标量或者等长的向量<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">lit(N•dot•L,N•dot•H, m)</code><td style="text-align: left">Blinn–Phong反射公式,N表示法向量，L表示入射光向量；H表示半角<br />向量；m表示高光系数；N • L代表散射光的贡献，如果其值 &lt; 0 ，则<br />为 0。Z 位代表镜面光的贡献，如果 N • L &lt; 0 或者N•H &lt; 0 ，则位 0；<br />否则为 (N • L)m。函数计算环境光、散射光、镜面光的贡献，返回<br />的 4 元向量<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">log(x)</code><td style="text-align: left">计算 ln( x) 的值， x 必须大于 0<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">log2(x)</code><td style="text-align: left">计算 log2(x) 的值， x 必须大于 0<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">log10(x)</code><td style="text-align: left">计算 log10 (x) 的值， x 必须大于 0<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">max(a, b)</code><td style="text-align: left">比较两个标量或等长向量元素，返回最大值<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">min(a,b)</code><td style="text-align: left">比较两个标量或等长向量元素，返回最小值<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">modf(x, out ip)</code><td style="text-align: left">将浮点数num分解成整数部分和小数部分，返回小数部分，将整数部<br />分存入ip。不常用<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">mul(M, N)</code><td style="text-align: left">计算两个矩阵相乘，如果 M 为 AxB 阶矩阵，N 为 BxC 阶矩阵，则返回<br />AxC 阶矩阵。下面两个函数为其重载函数<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">mul(M, v)</code><td style="text-align: left">计算矩阵和向量相乘<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">mul(v, M)</code><td style="text-align: left">计算向量和矩阵相乘<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">noise(x)</code><td style="text-align: left">噪声函数，返回值始终在 0， 1 之间；对于同样的输入，始终返回相同<br />的值（也就是说，并不是真正意义上的随机噪声）<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">pow(x, y)</code><td style="text-align: left">$ x^y $<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">radians(x)</code><td style="text-align: left">函数将角度值转换为弧度值<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">round(x)</code><td style="text-align: left">即四舍五入<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">sqrt(x)</code><td style="text-align: left">求 x 的平方根， x ， x 必须大于 0<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">rsqrt(x)</code><td style="text-align: left">平方根倒数$ y= \frac{1}{\sqrt{x}} $，x 必须大于 0<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">saturate(x)</code><td style="text-align: left">如果 x 小于 0，返回 0；如果 x 大于 1，返回1；否则，返回 x<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">sign(x)</code><td style="text-align: left">如果 x 大于 0，返回 1；如果 x 小于 0，返回01；否则返回 0<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">sin(x)</code><td style="text-align: left">输入参数为弧度，计算正弦值，返回值范围为[-1,1]<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">cos(x)</code><td style="text-align: left">返回弧度 x 的余弦值。返回值范围为[-1,1]<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">tan(x)</code><td style="text-align: left">输入参数为弧度，计算正切值<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">acos(x)</code><td style="text-align: left">反余切函数，输入参数范围为[-1,1]，返回[0,π ]区间的角度值<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">asin(x)</code><td style="text-align: left">反正弦函数,输入参数取值区间为[-1,1]，返回角度值范围为<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">atan(x)</code><td style="text-align: left">反正切函数，返回角度值范围为<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">atan2(y,x)</code><td style="text-align: left">计算$\frac{y}{x}$ 的反正切值。实际上和 atan(x)函数功能完全一样，至<br />少输入参数不同。 atan(x)= atan2(x, float(1))<tr><td style="text-align: left">sincos(float x,<br />out s, out c)<td style="text-align: left">该函数是同时计算 x 的 sin 值和 cos 值，其中s=sin(x)，<br />c=cos(x)。该函数用于”同时需要计算 sin 值和 cos 值的情况”，<br />比分别运算要快很多<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">sinh(x)</code><td style="text-align: left">计算双曲正弦（hyperbolic sine）值<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">cosh(x)</code><td style="text-align: left">双曲余弦（hyperbolic cosine）函数，计算 x的双曲余弦值<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">tanh(x)</code><td style="text-align: left">计算双曲正切值<tr><td style="text-align: left">smoothstep(min,<br />max, x)<td style="text-align: left">值 x 位于 min、 max 区间中。如果x=min，返回 0；如果<br />x=max，返回 1；如果 x 在两者之间，按照下列公式返回数据<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">step(a, x)</code><td style="text-align: left">如果 x&lt;a，返回 0；否则，返回 1<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">transpose(M)</code><td style="text-align: left">M 为矩阵，计算其转置矩阵</table></div><h2 id="几何函数geometric-functions"><span class="mr-2">几何函数（Geometric Functions）</span><a href="#几何函数geometric-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>如下表所示，几何函数用于执行和解析几何相关的计算，例如根据入射光向量和顶点法向量，求取反射光和折射光方向向量。 Cg 语言标准函数库中有3个几何函数会经常被使用到分别是</p><ol><li>normalize 函数，对向量进行归一化<li>reflect函数，计算反射光方向向量<li>refract 函数，计算折射光方向向量</ol><blockquote class="prompt-danger"><div><p>着色程序中的向量最好进行归一化之后再使用，否则会出现难以预料的错误.</p></div></blockquote><blockquote class="prompt-info"><div><p>reflect 函数和 refract 函数都存在以”入射光方向向量”作为输入参数，注意这两个函数中使用的入射光方向向量，是从外指向几何顶点的；平时我们在着色程序中或者在课本上都是将入射光方向向量作为从顶点出发.</p></div></blockquote><div class="table-wrapper"><table><thead><tr><th style="text-align: left">函数<th style="text-align: left">功能<tbody><tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">distance( pt1, pt2)</code><td style="text-align: left">两点之间的欧几里德距离（Euclidean distance）<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">faceforward(N,I,Ng)</code><td style="text-align: left">如果 Ng • I &lt; 0 ，返回 N；否则返回-N<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">length(v)</code><td style="text-align: left">返回一个向量的模，即 sqrt(dot(v,v))<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">normalize( v)</code><td style="text-align: left">归一化向量<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">reflect(I, N)</code><td style="text-align: left">根据入射光方向向量 I，和顶点法向量N，计算反射光方向向量。<br />其中 I 和 N必须被归一化，需要非常注意的是，这个 I 是指向顶<br />点；函数只对三元向量有效。<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">refract(I,N,eta)</code><td style="text-align: left">计算折射向量， I 为入射光线， N 为法向量， eta 为折射系数；<br />其中 I 和 N 必须被归一化， 如果 I 和 N 之间的夹角太大，则返回<br />（0， 0， 0），也就是没有折射光线； I 是指向顶点的；函数只<br />对三元向量有效</table></div><h2 id="纹理映射函数texture-map-functions"><span class="mr-2">纹理映射函数（texture Map Functions）</span><a href="#纹理映射函数texture-map-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>下表提供 Cg 标准函数库中的纹理映射函数。这些函数被 ps_2_0、 ps_2_x、arbfp1、 fp30 和fp40 等 profiles 完全支持（fully supported）。所有的这些函数返回四元向量值。</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">函数<th style="text-align: left">功能<tbody><tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">tex1D</code><td style="text-align: left">(sampler1D tex, float s)一维纹理查询<tr><td style="text-align: left">tex1D(sampler1D tex, float s, <br />float dsdx, float dsdy)<td style="text-align: left">使用导数值（derivatives）查询一维纹理<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">tex1D(sampler1D tex, float2 sz)</code><td style="text-align: left">一维纹理查询，并进行深度值比较<tr><td style="text-align: left">tex1D(sampler1D tex, float2 sz, <br />float dsdx,float dsdy)<td style="text-align: left">使用导数值（derivatives）查询一维纹理， 并进行深度值比较<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">tex1Dproj(sampler1D tex, float2 sq)</code><td style="text-align: left">一维投影纹理查询<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">tex1Dproj(sampler1D tex, float3 szq)</code><td style="text-align: left">一维投影纹理查询，并比较深度值<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">tex2D(sampler2D tex, float2 s)</code><td style="text-align: left">二维纹理查询—采样<tr><td style="text-align: left">tex2D(sampler2D tex, float2 s, <br />float2 dsdx, float2 dsdy)<td style="text-align: left">使用导数值（derivatives）查询二维纹理<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">tex2D(sampler2D tex, float3 sz)</code><td style="text-align: left">二维纹理查询，并进行深度值比较<tr><td style="text-align: left">tex2D(sampler2D tex, float3 sz, <br />float2 dsdx,float2 dsdy)<td style="text-align: left">使用导数值（derivatives）查询二维纹理，并进行深度值比较<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">tex2Dproj(sampler2D tex, float3 sq)</code><td style="text-align: left">二维投影纹理查询<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">tex2Dproj(sampler2D tex, float4 szq)</code><td style="text-align: left">二维投影纹理查询，并进行深度值比较<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">texRECT(samplerRECT tex, float2 s)</code><td style="text-align: left">二维非投影矩形纹理查询（OpenGL独有）<tr><td style="text-align: left">texRECT (samplerRECT tex, float2 s, <br />float2 dsdx, float2 dsdy)<td style="text-align: left">二维非投影使用导数的矩形纹理查询（OpenGL独有）<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">texRECT (samplerRECT tex, float3 sz)</code><td style="text-align: left">二维非投影深度比较矩形纹理查询（OpenGL独有）<tr><td style="text-align: left">texRECT (samplerRECT tex, float3 sz, <br />float2 dsdx,float2 dsdy)<td style="text-align: left">二维非投影深度比较并使用导数的矩形纹理查询（OpenGL独有）<tr><td style="text-align: left">texRECT proj(samplerRECT tex, <br />float3 sq)<td style="text-align: left">二维投影矩形纹理查询（OpenGL独有）<tr><td style="text-align: left">texRECT proj(samplerRECT tex, <br />float3 szq)<td style="text-align: left">二维投影矩形纹理查询（OpenGL独有）<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">tex3D(sampler3D tex, float s)</code><td style="text-align: left">三维纹理查询<tr><td style="text-align: left">tex3D(sampler3D tex, float3 s,<br /> float3 dsdx, float3 dsdy)<td style="text-align: left">结合导数值（derivatives）查询三维纹理<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">tex3Dproj(sampler3D tex, float4 szq)</code><td style="text-align: left">查询三维投影纹理，并进行深度值比较<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">texCUBE(samplerCUBE tex, float3 s)</code><td style="text-align: left">查询立方体纹理<tr><td style="text-align: left">texCUBE(samplerCUBE tex, float3 s, <br />float3 dsdx, float3 dsdy)<td style="text-align: left">结合导数值（derivatives）查询立方体纹理<tr><td style="text-align: left">texCUBEproj(samplerCUBE tex, <br />float4 sq)<td style="text-align: left">查询投影立方体纹理</table></div><h2 id="偏导函数derivative-functions"><span class="mr-2">偏导函数（Derivative Functions）</span><a href="#偏导函数derivative-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="table-wrapper"><table><thead><tr><th style="text-align: left">函数<th style="text-align: left">功能<tbody><tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">ddx(a)</code><td style="text-align: left">参数 a 对应一个像素位置， 返回该像素值在 X 轴上的偏导数<tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">ddy(a)</code><td style="text-align: left">参数 a 对应一个像素位置， 返回该像素值在 X 轴上的偏导数</table></div><h2 id="调试函数debugging-function"><span class="mr-2">调试函数（Debugging Function）</span><a href="#调试函数debugging-function" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="table-wrapper"><table><thead><tr><th style="text-align: left">函数<th style="text-align: left">功能<tbody><tr><td style="text-align: left"><code class="language-plaintext highlighter-rouge">void debug(float4 x)</code><td style="text-align: left">如果在编译时设置了DEBUG，片段着色程序中调用该函数可以将值x作为<br />COLOR 语义的最终输出；否则该函数什么也不做</table></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/unity3d/'>Unity3D</a>, <a href='/categories/shader/'>Shader</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cg/" class="post-tag no-text-decoration" >CG</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=CG%E5%87%BD%E6%95%B0%E6%A0%87%E5%87%86%E5%BA%93+-+&url=https%3A%2F%2Fwww.damonc.com%2Fposts%2FCG-function-library%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=CG%E5%87%BD%E6%95%B0%E6%A0%87%E5%87%86%E5%BA%93+-+&u=https%3A%2F%2Fwww.damonc.com%2Fposts%2FCG-function-library%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.damonc.com%2Fposts%2FCG-function-library%2F&text=CG%E5%87%BD%E6%95%B0%E6%A0%87%E5%87%86%E5%BA%93+-+" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="http://service.weibo.com/share/share.php?title=CG%E5%87%BD%E6%95%B0%E6%A0%87%E5%87%86%E5%BA%93+-+&url=https%3A%2F%2Fwww.damonc.com%2Fposts%2FCG-function-library%2F" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Unity-Matrix&Transform/">翻译1 Unity Transform&Matrix</a><li><a href="/posts/markdown-cheat-sheet/">Markdown语法集合速查表</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cg/">CG</a> <a class="post-tag" href="/tags/markdown/">Markdown</a> <a class="post-tag" href="/tags/shader/">Shader</a> <a class="post-tag" href="/tags/unity3d/">Unity3D</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 mb-5"><div class="panel-heading pl-1 pt-2 mb-2">文章内容</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Unity-Matrix&Transform/"><div class="card-body"> <em class="timeago small" data-ts="1514768400" > 2018-01-01 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>翻译1 Unity Transform&Matrix</h3><div class="text-muted small"><p> 可视空间 Unity Shader是怎么知道一个像素该画在哪个位置？下面是先展示一组Cube，一步步分析下去 cube array 操控一组3维坐标 创建一组10*10*10的3维Cube数组，并作为UnityMatrices对象的成员变量，接下来显示这些Cube在空间中的位置 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 1...</p></div></div></a></div><div class="card"> <a href="/posts/markdown-cheat-sheet/"><div class="card-body"> <em class="timeago small" data-ts="1458184620" > 2016-03-17 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Markdown语法集合速查表</h3><div class="text-muted small"><p> Thanks for visiting The Markdown Guide! This Markdown cheat sheet provides a quick overview of all the Markdown syntax elements. It can’t cover every edge case, so if you need more information abo...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/markdown-cheat-sheet/" class="btn btn-outline-primary" prompt="上一篇"><p>Markdown语法集合速查表</p></a> <a href="/posts/Unity-Matrix&Transform/" class="btn btn-outline-primary" prompt="下一篇"><p>翻译1 Unity Transform&Matrix</p></a></div><div></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "damonc-top/damonc-top.github.io", "data-repo-id": "R_kgDOHK_iGQ", "data-category": "", "data-category-id": "DIC_kwDOHK_iGc4COonD", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-loading":"lazy", "data-theme": initTheme, "data-input-position": "top", "data-lang": "zh-CN", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> <span>©2016-2022-</span> <span><a href="https://github.com/damonc-top">阿锋 -</a></span> <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。"> 云上的日子 </span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cg/">CG</a> <a class="post-tag" href="/tags/markdown/">Markdown</a> <a class="post-tag" href="/tags/shader/">Shader</a> <a class="post-tag" href="/tags/unity3d/">Unity3D</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script>
